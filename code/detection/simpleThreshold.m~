% simpleThreshold -- detects clouds pixel by pixel using a set threshold
%
% OVERVIEW: If R-B > 30 for a pixel, where R = red channel and B = blue
% channel, classify as clouds. Else classify as sky. If enough of the
% superpixel is classified as clouds / sky, classify the whole superpixel
% in the same way.
%
% Usage: simpleThreshold(im, pixelLabels)
%
% Arguments:    im - original RGB image
%               k - number of superpixels
%               pixelLabels - output of SLIC; each pixel assigned 1,..,k
%
% Output:       A binary image after applying a mask on the original image

function simpleThreshold(im, ~, ~)
    %[r,c] = size(im);
    threshold = 30;
    
    % Get the R-B channel image
    diffMap = double(im(:,:,1)) - double(im(:,:,3));
    diffMap = abs(diffMap);
    
    %binaryImage = zeros(size(diffMap,1), size(diffMap,2));
    binaryImage = diffMap >= 60;
    binaryImage = uint8(binaryImage);
    
    maskedImage = im.*repmat(binaryImage,[1,1,3]);
    
    
    imshow(maskedImage);
    
    
    